{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/adriengrampone/Documents/A&F/mobin/frontend/pages/auth/documents-federaux/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport { Container, Box, Grid } from '@material-ui/core';\nimport { Layout, Text, DownloadDocumentSection } from '../../../components';\nimport AppContext from \"../../../context/AppContext\";\n\nvar PrivateNationalDocs = function PrivateNationalDocs(_ref) {\n  _s();\n\n  var _ref$docs = _ref.docs,\n      docs = _ref$docs === void 0 ? [] : _ref$docs;\n\n  var _useContext = useContext(AppContext),\n      user = _useContext.user;\n\n  var _useState = useState(docs),\n      docsToDisplay = _useState[0],\n      setDocsToDisplay = _useState[1];\n\n  useEffect(function () {\n    if (user.role.type !== \"mobin_admin\") {\n      var newsDocs = docs.filter(function (d) {\n        return d.contenu_mobin_admin !== true;\n      });\n      setDocsToDisplay(newsDocs);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      mt: 7,\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            mb: 2,\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              size: \"h4\",\n              letterspacing: \"2px\",\n              bold: true,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#e95e2e\"\n                },\n                children: \"Documents\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 26,\n                columnNumber: 33\n              }, _this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#2699b0\"\n                },\n                children: \"f\\xE9d\\xE9raux\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 26,\n                columnNumber: 85\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 25,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Box, {\n          mb: 2,\n          mt: 4,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 10,\n            children: docsToDisplay && docsToDisplay.map(function (doc, index) {\n              return /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(DownloadDocumentSection, {\n                  doc: doc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 36,\n                  columnNumber: 41\n                }, _this)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 35,\n                columnNumber: 37\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(PrivateNationalDocs, \"7gcxStTTV7B/JwRDXOcs1xLaTsc=\");\n\n_c = PrivateNationalDocs;\nexport var __N_SSP = true;\nexport default PrivateNationalDocs;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateNationalDocs\");","map":{"version":3,"sources":["/Users/adriengrampone/Documents/A&F/mobin/frontend/pages/auth/documents-federaux/index.js"],"names":["useContext","useEffect","useState","Container","Box","Grid","Layout","Text","DownloadDocumentSection","AppContext","PrivateNationalDocs","docs","user","docsToDisplay","setDocsToDisplay","role","type","newsDocs","filter","d","contenu_mobin_admin","color","map","doc","index"],"mappings":";;;;;;AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,IAAzB,QAAqC,mBAArC;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,uBAAvB,QAAsD,qBAAtD;AAGA,OAAOC,UAAP,MAAuB,6BAAvB;;AAEA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,OAAmB;AAAA;;AAAA,uBAAhBC,IAAgB;AAAA,MAAhBA,IAAgB,0BAAT,EAAS;;AAAA,oBAC1BX,UAAU,CAACS,UAAD,CADgB;AAAA,MACnCG,IADmC,eACnCA,IADmC;;AAAA,kBAEDV,QAAQ,CAACS,IAAD,CAFP;AAAA,MAEpCE,aAFoC;AAAA,MAErBC,gBAFqB;;AAI3Cb,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIW,IAAI,CAACG,IAAL,CAAUC,IAAV,KAAmB,aAAvB,EAAsC;AAClC,UAAMC,QAAQ,GAAGN,IAAI,CAACO,MAAL,CAAY,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,mBAAF,KAA0B,IAA9B;AAAA,OAAb,CAAjB;AACAN,MAAAA,gBAAgB,CAACG,QAAD,CAAhB;AACH;AACJ,GALQ,EAKN,EALM,CAAT;AAOA,sBACI,QAAC,MAAD;AAAA,2BACI,QAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA,6BACI,QAAC,SAAD;AAAW,QAAA,QAAQ,EAAC,IAApB;AAAA,gCACI,QAAC,IAAD;AAAM,UAAA,SAAS,MAAf;AAAA,iCACI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE,CAAT;AAAA,mCACI,QAAC,IAAD;AAAM,cAAA,IAAI,EAAC,IAAX;AAAgB,cAAA,aAAa,EAAC,KAA9B;AAAoC,cAAA,IAAI,MAAxC;AAAA,sCACI;AAAM,gBAAA,KAAK,EAAE;AAAEI,kBAAAA,KAAK,EAAE;AAAT,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,oBACwD;AAAM,gBAAA,KAAK,EAAE;AAAEA,kBAAAA,KAAK,EAAE;AAAT,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADxD;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,iBADJ,eASI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAY,UAAA,EAAE,EAAE,CAAhB;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,SAAS,MAAf;AAAgB,YAAA,OAAO,EAAE,EAAzB;AAAA,sBAEQR,aAAa,IAAIA,aAAa,CAACS,GAAd,CAAkB,UAACC,GAAD,EAAMC,KAAN;AAAA,kCAC/B,QAAC,IAAD;AAAkB,gBAAA,IAAI,MAAtB;AAAuB,gBAAA,EAAE,EAAE,EAA3B;AAA+B,gBAAA,EAAE,EAAE,CAAnC;AAAA,uCACI,QAAC,uBAAD;AAAyB,kBAAA,GAAG,EAAED;AAA9B;AAAA;AAAA;AAAA;AAAA;AADJ,iBAAWC,KAAX;AAAA;AAAA;AAAA;AAAA,uBAD+B;AAAA,aAAlB;AAFzB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,iBATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,WADJ;AA4BH,CAvCD;;GAAMd,mB;;KAAAA,mB;;AAyEN,eAAeA,mBAAf","sourcesContent":["import { useContext, useEffect, useState } from 'react'\nimport { Container, Box, Grid } from '@material-ui/core'\nimport { Layout, Text, DownloadDocumentSection } from '../../../components'\nimport { getResources, isTokenValid } from '../../../utils'\nimport Cookies from 'cookies'\nimport AppContext from \"../../../context/AppContext\";\n\nconst PrivateNationalDocs = ({ docs = [] }) => {\n    const { user } = useContext(AppContext);\n    const [docsToDisplay, setDocsToDisplay] = useState(docs)\n\n    useEffect(() => {\n        if (user.role.type !== \"mobin_admin\") {\n            const newsDocs = docs.filter(d => d.contenu_mobin_admin !== true)\n            setDocsToDisplay(newsDocs)\n        }\n    }, [])\n\n    return (\n        <Layout>\n            <Box mt={7}>\n                <Container maxWidth=\"lg\">\n                    <Grid container>\n                        <Box mb={2}>\n                            <Text size=\"h4\" letterspacing=\"2px\" bold>\n                                <span style={{ color: \"#e95e2e\" }}>Documents</span> <span style={{ color: \"#2699b0\" }}>fédéraux</span>\n                            </Text>\n                        </Box>\n                    </Grid>\n\n                    <Box mb={2} mt={4}>\n                        <Grid container spacing={10}>\n                            {\n                                docsToDisplay && docsToDisplay.map((doc, index) => (\n                                    <Grid key={index} item xs={12} md={6}>\n                                        <DownloadDocumentSection doc={doc} />\n                                    </Grid>\n                                ))\n                            }\n                        </Grid>\n                    </Box>\n\n                </Container>\n            </Box>\n        </Layout>\n    )\n}\n\nexport const getServerSideProps = async (ctx) => {\n    const req = ctx.req ? ctx.req : null\n    if (req) {\n        const cookies = new Cookies(ctx.req, ctx.res)\n        const token = cookies.get('token')\n        if (token) {\n            const isTokValid = isTokenValid(token)\n            if (isTokValid) {\n                const res = await fetch(getResources)\n                const resources = await res.json()\n                const docs = resources.filter(doc => doc?.thematique?.titre === \"Documents fédéraux\").sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\n\n                return {\n                    props: { docs }\n                };\n            } else {\n                ctx.res.writeHead(302, { Location: '/' })\n                ctx.res.end()\n                return { props: {} }\n            }\n\n\n        } else {\n            ctx.res.writeHead(302, { Location: '/' })\n            ctx.res.end()\n            return { props: {} }\n        }\n    } else {\n\n    }\n}\n\nexport default PrivateNationalDocs"]},"metadata":{},"sourceType":"module"}