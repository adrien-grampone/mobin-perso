{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Container, Box, Grid } from '@material-ui/core';\nimport { Layout, Text, DownloadDocumentSection } from '../../../components';\nimport { getResources, isTokenValid } from '../../../utils';\nimport Cookies from 'cookies';\n\nconst PrivateNews = ({\n  docs = []\n}) => {\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(Box, {\n      mt: 7,\n      children: /*#__PURE__*/_jsxs(Container, {\n        maxWidth: \"lg\",\n        children: [/*#__PURE__*/_jsx(Grid, {\n          container: true,\n          children: /*#__PURE__*/_jsx(Box, {\n            mb: 2,\n            children: /*#__PURE__*/_jsx(Text, {\n              size: \"h4\",\n              letterspacing: \"2px\",\n              bold: true,\n              children: /*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  color: \"#e95e2e\"\n                },\n                children: \"Actualit\\xE9s\"\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsx(Box, {\n          mb: 2,\n          mt: 4,\n          children: /*#__PURE__*/_jsx(Grid, {\n            container: true,\n            spacing: 10,\n            children: docs && docs.map((doc, index) => /*#__PURE__*/_jsx(Grid, {\n              item: true,\n              xs: 12,\n              md: 6,\n              children: /*#__PURE__*/_jsx(DownloadDocumentSection, {\n                doc: doc\n              })\n            }, index))\n          })\n        })]\n      })\n    })\n  });\n};\n\nexport const getServerSideProps = async ctx => {\n  const req = ctx.req ? ctx.req : null;\n\n  if (req) {\n    const cookies = new Cookies(ctx.req, ctx.res);\n    const token = cookies.get('token');\n\n    if (token) {\n      const isTokValid = isTokenValid(token);\n\n      if (isTokValid) {\n        const res = await fetch(getResources);\n        const resources = await res.json();\n        const docs = resources.filter(doc => {\n          var _doc$thematique;\n\n          return (doc === null || doc === void 0 ? void 0 : (_doc$thematique = doc.thematique) === null || _doc$thematique === void 0 ? void 0 : _doc$thematique.titre) === \"ActualitÃ©s\";\n        }).sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n        return {\n          props: {\n            docs\n          }\n        };\n      } else {\n        ctx.res.writeHead(302, {\n          Location: '/'\n        });\n        ctx.res.end();\n        return {\n          props: {}\n        };\n      }\n    } else {\n      ctx.res.writeHead(302, {\n        Location: '/'\n      });\n      ctx.res.end();\n      return {\n        props: {}\n      };\n    }\n  } else {}\n};\nexport default PrivateNews;","map":null,"metadata":{},"sourceType":"module"}