{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/adriengrampone/Documents/A&F/mobin/frontend/pages/auth/documents-federaux/index.js\";\nimport { useContext, useEffect, useState } from 'react';\nimport { Container, Box, Grid } from '@material-ui/core';\nimport { Layout, Text, DownloadDocumentSection } from '../../../components';\nimport { getResources, isTokenValid } from '../../../utils';\nimport Cookies from 'cookies';\nimport AppContext from \"../../../context/AppContext\";\n\nconst PrivateNationalDocs = ({\n  docs = []\n}) => {\n  const {\n    user\n  } = useContext(AppContext);\n  const {\n    0: docsToDisplay,\n    1: setDocsToDisplay\n  } = useState(docs);\n  useEffect(() => {\n    if (user.role.type !== \"mobin_admin\") {\n      const newsDocs = docs.filter(d => d.contenu_mobin_admin !== true);\n      setDocsToDisplay(newsDocs);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      mt: 7,\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            mb: 2,\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              size: \"h4\",\n              letterspacing: \"2px\",\n              bold: true,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#e95e2e\"\n                },\n                children: \"Documents\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 26,\n                columnNumber: 33\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#2699b0\"\n                },\n                children: \"f\\xE9d\\xE9raux\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 26,\n                columnNumber: 85\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 25,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          mb: 2,\n          mt: 4,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 10,\n            children: docsToDisplay && docsToDisplay.map((doc, index) => /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(DownloadDocumentSection, {\n                doc: doc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 36,\n                columnNumber: 41\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 35,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }, this);\n};\n\nexport const getServerSideProps = async ctx => {\n  const req = ctx.req ? ctx.req : null;\n\n  if (req) {\n    const cookies = new Cookies(ctx.req, ctx.res);\n    const token = cookies.get('token');\n\n    if (token) {\n      const isTokValid = isTokenValid(token);\n\n      if (isTokValid) {\n        const res = await fetch(getResources);\n        const resources = await res.json();\n        const docs = resources.filter(doc => {\n          var _doc$thematique;\n\n          return (doc === null || doc === void 0 ? void 0 : (_doc$thematique = doc.thematique) === null || _doc$thematique === void 0 ? void 0 : _doc$thematique.titre) === \"Documents fédéraux\";\n        }).sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n        return {\n          props: {\n            docs\n          }\n        };\n      } else {\n        ctx.res.writeHead(302, {\n          Location: '/'\n        });\n        ctx.res.end();\n        return {\n          props: {}\n        };\n      }\n    } else {\n      ctx.res.writeHead(302, {\n        Location: '/'\n      });\n      ctx.res.end();\n      return {\n        props: {}\n      };\n    }\n  } else {}\n};\nexport default PrivateNationalDocs;","map":{"version":3,"sources":["/Users/adriengrampone/Documents/A&F/mobin/frontend/pages/auth/documents-federaux/index.js"],"names":["useContext","useEffect","useState","Container","Box","Grid","Layout","Text","DownloadDocumentSection","getResources","isTokenValid","Cookies","AppContext","PrivateNationalDocs","docs","user","docsToDisplay","setDocsToDisplay","role","type","newsDocs","filter","d","contenu_mobin_admin","color","map","doc","index","getServerSideProps","ctx","req","cookies","res","token","get","isTokValid","fetch","resources","json","thematique","titre","sort","a","b","Date","created_at","props","writeHead","Location","end"],"mappings":";;AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,IAAzB,QAAqC,mBAArC;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,uBAAvB,QAAsD,qBAAtD;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,gBAA3C;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;;AAEA,MAAMC,mBAAmB,GAAG,CAAC;AAAEC,EAAAA,IAAI,GAAG;AAAT,CAAD,KAAmB;AAC3C,QAAM;AAAEC,IAAAA;AAAF,MAAWf,UAAU,CAACY,UAAD,CAA3B;AACA,QAAM;AAAA,OAACI,aAAD;AAAA,OAAgBC;AAAhB,MAAoCf,QAAQ,CAACY,IAAD,CAAlD;AAEAb,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIc,IAAI,CAACG,IAAL,CAAUC,IAAV,KAAmB,aAAvB,EAAsC;AAClC,YAAMC,QAAQ,GAAGN,IAAI,CAACO,MAAL,CAAYC,CAAC,IAAIA,CAAC,CAACC,mBAAF,KAA0B,IAA3C,CAAjB;AACAN,MAAAA,gBAAgB,CAACG,QAAD,CAAhB;AACH;AACJ,GALQ,EAKN,EALM,CAAT;AAOA,sBACI,QAAC,MAAD;AAAA,2BACI,QAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA,6BACI,QAAC,SAAD;AAAW,QAAA,QAAQ,EAAC,IAApB;AAAA,gCACI,QAAC,IAAD;AAAM,UAAA,SAAS,MAAf;AAAA,iCACI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE,CAAT;AAAA,mCACI,QAAC,IAAD;AAAM,cAAA,IAAI,EAAC,IAAX;AAAgB,cAAA,aAAa,EAAC,KAA9B;AAAoC,cAAA,IAAI,MAAxC;AAAA,sCACI;AAAM,gBAAA,KAAK,EAAE;AAAEI,kBAAAA,KAAK,EAAE;AAAT,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,oBACwD;AAAM,gBAAA,KAAK,EAAE;AAAEA,kBAAAA,KAAK,EAAE;AAAT,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADxD;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eASI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAY,UAAA,EAAE,EAAE,CAAhB;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,SAAS,MAAf;AAAgB,YAAA,OAAO,EAAE,EAAzB;AAAA,sBAEQR,aAAa,IAAIA,aAAa,CAACS,GAAd,CAAkB,CAACC,GAAD,EAAMC,KAAN,kBAC/B,QAAC,IAAD;AAAkB,cAAA,IAAI,MAAtB;AAAuB,cAAA,EAAE,EAAE,EAA3B;AAA+B,cAAA,EAAE,EAAE,CAAnC;AAAA,qCACI,QAAC,uBAAD;AAAyB,gBAAA,GAAG,EAAED;AAA9B;AAAA;AAAA;AAAA;AAAA;AADJ,eAAWC,KAAX;AAAA;AAAA;AAAA;AAAA,oBADa;AAFzB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AA4BH,CAvCD;;AAyCA,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,GAAP,IAAe;AAC7C,QAAMC,GAAG,GAAGD,GAAG,CAACC,GAAJ,GAAUD,GAAG,CAACC,GAAd,GAAoB,IAAhC;;AACA,MAAIA,GAAJ,EAAS;AACL,UAAMC,OAAO,GAAG,IAAIpB,OAAJ,CAAYkB,GAAG,CAACC,GAAhB,EAAqBD,GAAG,CAACG,GAAzB,CAAhB;AACA,UAAMC,KAAK,GAAGF,OAAO,CAACG,GAAR,CAAY,OAAZ,CAAd;;AACA,QAAID,KAAJ,EAAW;AACP,YAAME,UAAU,GAAGzB,YAAY,CAACuB,KAAD,CAA/B;;AACA,UAAIE,UAAJ,EAAgB;AACZ,cAAMH,GAAG,GAAG,MAAMI,KAAK,CAAC3B,YAAD,CAAvB;AACA,cAAM4B,SAAS,GAAG,MAAML,GAAG,CAACM,IAAJ,EAAxB;AACA,cAAMxB,IAAI,GAAGuB,SAAS,CAAChB,MAAV,CAAiBK,GAAG;AAAA;;AAAA,iBAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,+BAAAA,GAAG,CAAEa,UAAL,oEAAiBC,KAAjB,MAA2B,oBAA/B;AAAA,SAApB,EAAyEC,IAAzE,CAA8E,CAACC,CAAD,EAAIC,CAAJ,KAAU,IAAIC,IAAJ,CAASD,CAAC,CAACE,UAAX,IAAyB,IAAID,IAAJ,CAASF,CAAC,CAACG,UAAX,CAAjH,CAAb;AAEA,eAAO;AACHC,UAAAA,KAAK,EAAE;AAAEhC,YAAAA;AAAF;AADJ,SAAP;AAGH,OARD,MAQO;AACHe,QAAAA,GAAG,CAACG,GAAJ,CAAQe,SAAR,CAAkB,GAAlB,EAAuB;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAAvB;AACAnB,QAAAA,GAAG,CAACG,GAAJ,CAAQiB,GAAR;AACA,eAAO;AAAEH,UAAAA,KAAK,EAAE;AAAT,SAAP;AACH;AAGJ,KAjBD,MAiBO;AACHjB,MAAAA,GAAG,CAACG,GAAJ,CAAQe,SAAR,CAAkB,GAAlB,EAAuB;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAAvB;AACAnB,MAAAA,GAAG,CAACG,GAAJ,CAAQiB,GAAR;AACA,aAAO;AAAEH,QAAAA,KAAK,EAAE;AAAT,OAAP;AACH;AACJ,GAzBD,MAyBO,CAEN;AACJ,CA9BM;AAgCP,eAAejC,mBAAf","sourcesContent":["import { useContext, useEffect, useState } from 'react'\nimport { Container, Box, Grid } from '@material-ui/core'\nimport { Layout, Text, DownloadDocumentSection } from '../../../components'\nimport { getResources, isTokenValid } from '../../../utils'\nimport Cookies from 'cookies'\nimport AppContext from \"../../../context/AppContext\";\n\nconst PrivateNationalDocs = ({ docs = [] }) => {\n    const { user } = useContext(AppContext);\n    const [docsToDisplay, setDocsToDisplay] = useState(docs)\n\n    useEffect(() => {\n        if (user.role.type !== \"mobin_admin\") {\n            const newsDocs = docs.filter(d => d.contenu_mobin_admin !== true)\n            setDocsToDisplay(newsDocs)\n        }\n    }, [])\n\n    return (\n        <Layout>\n            <Box mt={7}>\n                <Container maxWidth=\"lg\">\n                    <Grid container>\n                        <Box mb={2}>\n                            <Text size=\"h4\" letterspacing=\"2px\" bold>\n                                <span style={{ color: \"#e95e2e\" }}>Documents</span> <span style={{ color: \"#2699b0\" }}>fédéraux</span>\n                            </Text>\n                        </Box>\n                    </Grid>\n\n                    <Box mb={2} mt={4}>\n                        <Grid container spacing={10}>\n                            {\n                                docsToDisplay && docsToDisplay.map((doc, index) => (\n                                    <Grid key={index} item xs={12} md={6}>\n                                        <DownloadDocumentSection doc={doc} />\n                                    </Grid>\n                                ))\n                            }\n                        </Grid>\n                    </Box>\n\n                </Container>\n            </Box>\n        </Layout>\n    )\n}\n\nexport const getServerSideProps = async (ctx) => {\n    const req = ctx.req ? ctx.req : null\n    if (req) {\n        const cookies = new Cookies(ctx.req, ctx.res)\n        const token = cookies.get('token')\n        if (token) {\n            const isTokValid = isTokenValid(token)\n            if (isTokValid) {\n                const res = await fetch(getResources)\n                const resources = await res.json()\n                const docs = resources.filter(doc => doc?.thematique?.titre === \"Documents fédéraux\").sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\n\n                return {\n                    props: { docs }\n                };\n            } else {\n                ctx.res.writeHead(302, { Location: '/' })\n                ctx.res.end()\n                return { props: {} }\n            }\n\n\n        } else {\n            ctx.res.writeHead(302, { Location: '/' })\n            ctx.res.end()\n            return { props: {} }\n        }\n    } else {\n\n    }\n}\n\nexport default PrivateNationalDocs"]},"metadata":{},"sourceType":"module"}