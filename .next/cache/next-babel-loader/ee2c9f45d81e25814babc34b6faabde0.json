{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/adriengrampone/Documents/A&F/mobin/frontend/pages/auth/actualites/index.js\";\nimport { Container, Box, Grid } from '@material-ui/core';\nimport { Layout, Text, DownloadDocumentSection } from '../../../components';\nimport { getResources, isTokenValid } from '../../../utils';\nimport Cookies from 'cookies';\n\nconst PrivateNews = ({\n  docs = []\n}) => {\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      mt: 7,\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"lg\",\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            mb: 2,\n            children: /*#__PURE__*/_jsxDEV(Text, {\n              size: \"h4\",\n              letterspacing: \"2px\",\n              bold: true,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: \"#e95e2e\"\n                },\n                children: \"Actualit\\xE9s\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 16,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 15,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 14,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 13,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          mb: 2,\n          mt: 4,\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            spacing: 10,\n            children: docs && docs.map((doc, index) => /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              md: 6,\n              children: /*#__PURE__*/_jsxDEV(DownloadDocumentSection, {\n                doc: doc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 26,\n                columnNumber: 41\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 25,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 22,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 12,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 9\n  }, this);\n};\n\nexport const getServerSideProps = async ctx => {\n  const req = ctx.req ? ctx.req : null;\n\n  if (req) {\n    const cookies = new Cookies(ctx.req, ctx.res);\n    const token = cookies.get('token');\n\n    if (token) {\n      const isTokValid = isTokenValid(token);\n\n      if (isTokValid) {\n        const res = await fetch(getResources);\n        const resources = await res.json();\n        const docs = resources.filter(doc => {\n          var _doc$thematique;\n\n          return (doc === null || doc === void 0 ? void 0 : (_doc$thematique = doc.thematique) === null || _doc$thematique === void 0 ? void 0 : _doc$thematique.titre) === \"Actualités\";\n        }).sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n        return {\n          props: {\n            docs\n          }\n        };\n      } else {\n        ctx.res.writeHead(302, {\n          Location: '/'\n        });\n        ctx.res.end();\n        return {\n          props: {}\n        };\n      }\n    } else {\n      ctx.res.writeHead(302, {\n        Location: '/'\n      });\n      ctx.res.end();\n      return {\n        props: {}\n      };\n    }\n  } else {}\n};\nexport default PrivateNews;","map":{"version":3,"sources":["/Users/adriengrampone/Documents/A&F/mobin/frontend/pages/auth/actualites/index.js"],"names":["Container","Box","Grid","Layout","Text","DownloadDocumentSection","getResources","isTokenValid","Cookies","PrivateNews","docs","color","map","doc","index","getServerSideProps","ctx","req","cookies","res","token","get","isTokValid","fetch","resources","json","filter","thematique","titre","sort","a","b","Date","created_at","props","writeHead","Location","end"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,GAApB,EAAyBC,IAAzB,QAAqC,mBAArC;AACA,SAASC,MAAT,EAAiBC,IAAjB,EAAuBC,uBAAvB,QAAsD,qBAAtD;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,gBAA3C;AACA,OAAOC,OAAP,MAAoB,SAApB;;AAGA,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,IAAI,GAAG;AAAT,CAAD,KAAmB;AAEnC,sBACI,QAAC,MAAD;AAAA,2BACI,QAAC,GAAD;AAAK,MAAA,EAAE,EAAE,CAAT;AAAA,6BACI,QAAC,SAAD;AAAW,QAAA,QAAQ,EAAC,IAApB;AAAA,gCACI,QAAC,IAAD;AAAM,UAAA,SAAS,MAAf;AAAA,iCACI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAE,CAAT;AAAA,mCACI,QAAC,IAAD;AAAM,cAAA,IAAI,EAAC,IAAX;AAAgB,cAAA,aAAa,EAAC,KAA9B;AAAoC,cAAA,IAAI,MAAxC;AAAA,qCACI;AAAM,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,KAAK,EAAE;AAAT,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eASI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE,CAAT;AAAY,UAAA,EAAE,EAAE,CAAhB;AAAA,iCACI,QAAC,IAAD;AAAM,YAAA,SAAS,MAAf;AAAgB,YAAA,OAAO,EAAE,EAAzB;AAAA,sBAEQD,IAAI,IAAIA,IAAI,CAACE,GAAL,CAAS,CAACC,GAAD,EAAMC,KAAN,kBACb,QAAC,IAAD;AAAkB,cAAA,IAAI,MAAtB;AAAuB,cAAA,EAAE,EAAE,EAA3B;AAA+B,cAAA,EAAE,EAAE,CAAnC;AAAA,qCACI,QAAC,uBAAD;AAAyB,gBAAA,GAAG,EAAED;AAA9B;AAAA;AAAA;AAAA;AAAA;AADJ,eAAWC,KAAX;AAAA;AAAA;AAAA;AAAA,oBADI;AAFhB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AA4BH,CA9BD;;AAiCA,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,GAAP,IAAe;AAC7C,QAAMC,GAAG,GAAGD,GAAG,CAACC,GAAJ,GAAUD,GAAG,CAACC,GAAd,GAAoB,IAAhC;;AACA,MAAIA,GAAJ,EAAS;AACL,UAAMC,OAAO,GAAG,IAAIV,OAAJ,CAAYQ,GAAG,CAACC,GAAhB,EAAqBD,GAAG,CAACG,GAAzB,CAAhB;AACA,UAAMC,KAAK,GAAGF,OAAO,CAACG,GAAR,CAAY,OAAZ,CAAd;;AACA,QAAID,KAAJ,EAAW;AACP,YAAME,UAAU,GAAGf,YAAY,CAACa,KAAD,CAA/B;;AACA,UAAIE,UAAJ,EAAgB;AACZ,cAAMH,GAAG,GAAG,MAAMI,KAAK,CAACjB,YAAD,CAAvB;AACA,cAAMkB,SAAS,GAAG,MAAML,GAAG,CAACM,IAAJ,EAAxB;AACA,cAAMf,IAAI,GAAGc,SAAS,CAACE,MAAV,CAAiBb,GAAG;AAAA;;AAAA,iBAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,+BAAAA,GAAG,CAAEc,UAAL,oEAAiBC,KAAjB,MAA2B,YAA/B;AAAA,SAApB,EAAiEC,IAAjE,CAAsE,CAACC,CAAD,EAAIC,CAAJ,KAAU,IAAIC,IAAJ,CAASD,CAAC,CAACE,UAAX,IAAyB,IAAID,IAAJ,CAASF,CAAC,CAACG,UAAX,CAAzG,CAAb;AAEA,eAAO;AACHC,UAAAA,KAAK,EAAE;AAAExB,YAAAA;AAAF;AADJ,SAAP;AAGH,OARD,MAQO;AACHM,QAAAA,GAAG,CAACG,GAAJ,CAAQgB,SAAR,CAAkB,GAAlB,EAAuB;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAAvB;AACApB,QAAAA,GAAG,CAACG,GAAJ,CAAQkB,GAAR;AACA,eAAO;AAAEH,UAAAA,KAAK,EAAE;AAAT,SAAP;AACH;AAGJ,KAjBD,MAiBO;AACHlB,MAAAA,GAAG,CAACG,GAAJ,CAAQgB,SAAR,CAAkB,GAAlB,EAAuB;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAAvB;AACApB,MAAAA,GAAG,CAACG,GAAJ,CAAQkB,GAAR;AACA,aAAO;AAAEH,QAAAA,KAAK,EAAE;AAAT,OAAP;AACH;AACJ,GAzBD,MAyBO,CAEN;AACJ,CA9BM;AAkCP,eAAezB,WAAf","sourcesContent":["import { Container, Box, Grid } from '@material-ui/core'\nimport { Layout, Text, DownloadDocumentSection } from '../../../components'\nimport { getResources, isTokenValid } from '../../../utils'\nimport Cookies from 'cookies'\n\n\nconst PrivateNews = ({ docs = [] }) => {\n\n    return (\n        <Layout>\n            <Box mt={7}>\n                <Container maxWidth=\"lg\">\n                    <Grid container>\n                        <Box mb={2}>\n                            <Text size=\"h4\" letterspacing=\"2px\" bold>\n                                <span style={{ color: \"#e95e2e\" }}>Actualités</span>\n                            </Text>\n                        </Box>\n                    </Grid>\n\n                    <Box mb={2} mt={4}>\n                        <Grid container spacing={10}>\n                            {\n                                docs && docs.map((doc, index) => (\n                                    <Grid key={index} item xs={12} md={6}>\n                                        <DownloadDocumentSection doc={doc} />\n                                    </Grid>\n                                ))\n                            }\n                        </Grid>\n                    </Box>\n\n                </Container>\n            </Box>\n        </Layout>\n    )\n}\n\n\nexport const getServerSideProps = async (ctx) => {\n    const req = ctx.req ? ctx.req : null\n    if (req) {\n        const cookies = new Cookies(ctx.req, ctx.res)\n        const token = cookies.get('token')\n        if (token) {\n            const isTokValid = isTokenValid(token)\n            if (isTokValid) {\n                const res = await fetch(getResources)\n                const resources = await res.json()\n                const docs = resources.filter(doc => doc?.thematique?.titre === \"Actualités\").sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\n\n                return {\n                    props: { docs }\n                };\n            } else {\n                ctx.res.writeHead(302, { Location: '/' })\n                ctx.res.end()\n                return { props: {} }\n            }\n\n\n        } else {\n            ctx.res.writeHead(302, { Location: '/' })\n            ctx.res.end()\n            return { props: {} }\n        }\n    } else {\n\n    }\n}\n\n\n\nexport default PrivateNews"]},"metadata":{},"sourceType":"module"}