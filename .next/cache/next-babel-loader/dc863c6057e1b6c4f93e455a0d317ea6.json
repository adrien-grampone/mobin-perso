{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { Container, Box, Grid, FormControl, InputLabel, Select, MenuItem, Input, Button } from '@material-ui/core';\nimport { Layout, Title, AdherentPreview } from '../../../../components';\nimport { useRouter } from 'next/router';\nimport { filterAdherentsFromSelectedDepartments, filterAdherentsFromSelectedExpertises } from '../../../../utils';\nimport { makeStyles } from '@material-ui/core/styles';\nvar useStyles = makeStyles(function (theme) {\n  var _mediaMinWidth;\n\n  return {\n    banner: {\n      // border: `1px ${theme.palette.orange.main} solid`,\n      borderRadius: \"10px\",\n      padding: \"1em\",\n      marginBottom: '1em',\n      textAlign: 'left'\n    },\n    cell: {\n      verticalAlign: 'top'\n    },\n    mainImage: {\n      width: \"100%\",\n      maxHeight: \"200px\",\n      objectFit: \"contain\",\n      marginBottom: '1em'\n    },\n    gridItem: {\n      textAlign: \"center\",\n      justifyContent: \"center\"\n    },\n    formControl: {\n      margin: '1em',\n      minWidth: \"100%\" // maxWidth: 300,\n\n    },\n    chips: {\n      display: 'flex',\n      flexWrap: 'wrap'\n    },\n    chip: {\n      margin: 2\n    },\n    noLabel: {\n      marginTop: \"1em\"\n    },\n    inputLabel: {\n      fontSize: '15px'\n    },\n    grid: {// textAlign: 'center'\n    },\n    box: {\n      display: \"flex\",\n      flexDirection: \"column\" // justifyContent: \"center\"\n\n    },\n    coordBox: {\n      borderTop: \"4px solid \".concat(theme.palette.orange.main),\n      borderBottom: \"4px solid \".concat(theme.palette.orange.main),\n      \"@media (min-width: 960px)\": (_mediaMinWidth = {\n        position: \"-webkit-sticky\"\n      }, _defineProperty(_mediaMinWidth, \"position\", \"sticky\"), _defineProperty(_mediaMinWidth, \"top\", \"0px\"), _mediaMinWidth)\n    },\n    item1: _defineProperty({\n      order: 1\n    }, theme.breakpoints.down('sm'), {\n      order: 2\n    }),\n    item2: _defineProperty({\n      order: 2\n    }, theme.breakpoints.down('sm'), {\n      order: 1\n    }),\n    btn: {\n      textTransform: 'none' // textDecoration: \"underline\"\n\n    }\n  };\n});\nvar ITEM_HEIGHT = 48;\nvar ITEM_PADDING_TOP = 8;\nvar MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n};\n\nvar Region = function Region(_ref) {\n  var _uniqueCoordinateur$l;\n\n  var _ref$departments = _ref.departments,\n      departments = _ref$departments === void 0 ? [] : _ref$departments,\n      _ref$adherents = _ref.adherents,\n      adherents = _ref$adherents === void 0 ? [] : _ref$adherents,\n      _ref$coordinateurs = _ref.coordinateurs,\n      coordinateurs = _ref$coordinateurs === void 0 ? [] : _ref$coordinateurs,\n      _ref$expertises = _ref.expertises,\n      expertises = _ref$expertises === void 0 ? [] : _ref$expertises;\n  var classes = useStyles();\n  var router = useRouter();\n  var region = router.query.region;\n\n  var _useState = useState([]),\n      mainDepartementSelected = _useState[0],\n      setMainDepartmentSelected = _useState[1];\n\n  var _useState2 = useState([]),\n      mainExpertiseSelected = _useState2[0],\n      setMainExpertiseSelected = _useState2[1];\n\n  var adherentsFiltered = adherents.filter(function (adh) {\n    var _adh$region_siege;\n\n    return (adh === null || adh === void 0 ? void 0 : (_adh$region_siege = adh.region_siege) === null || _adh$region_siege === void 0 ? void 0 : _adh$region_siege.nom_region) === region;\n  });\n\n  var _useState3 = useState(adherents.filter(function (adh) {\n    var _adh$region_siege2;\n\n    return (adh === null || adh === void 0 ? void 0 : (_adh$region_siege2 = adh.region_siege) === null || _adh$region_siege2 === void 0 ? void 0 : _adh$region_siege2.nom_region) === region;\n  })),\n      adherentsToDisplay = _useState3[0],\n      setAdherentsToDisplay = _useState3[1];\n\n  var _useState4 = useState(adherents.filter(function (adh) {\n    var _adh$region_siege3;\n\n    return (adh === null || adh === void 0 ? void 0 : (_adh$region_siege3 = adh.region_siege) === null || _adh$region_siege3 === void 0 ? void 0 : _adh$region_siege3.nom_region) === region;\n  })),\n      adherentsToDisplayExpertise = _useState4[0],\n      setAdherentsToDisplayExpertise = _useState4[1]; // Get filtered Departments\n\n\n  var regionDepartments = departments.filter(function (dep) {\n    var _dep$region;\n\n    return (dep === null || dep === void 0 ? void 0 : (_dep$region = dep.region) === null || _dep$region === void 0 ? void 0 : _dep$region.nom_region) === region;\n  }); // Get filtered coordinateur\n\n  var uniqueCoordinateur = coordinateurs.find(function (c) {\n    var _c$region;\n\n    return (c === null || c === void 0 ? void 0 : (_c$region = c.region) === null || _c$region === void 0 ? void 0 : _c$region.nom_region) === region;\n  });\n\n  var getStyles = function getStyles(departement, mainDepartementSelected) {\n    return {\n      fontWeight: mainDepartementSelected.indexOf(departement) === -1 ? \"normal\" : \"bold\"\n    };\n  };\n\n  var getStylesExp = function getStylesExp(exp, mainExpertiseSelected) {\n    return {\n      fontWeight: mainExpertiseSelected.indexOf(exp) === -1 ? \"normal\" : \"bold\"\n    };\n  };\n\n  useEffect(function () {\n    var resultDeps = filterAdherentsFromSelectedDepartments(adherentsFiltered, mainDepartementSelected);\n    setAdherentsToDisplay(resultDeps);\n  }, [mainDepartementSelected]);\n  useEffect(function () {\n    var resultExp = filterAdherentsFromSelectedExpertises(adherentsFiltered, mainExpertiseSelected);\n    setAdherentsToDisplayExpertise(resultExp);\n  }, [mainExpertiseSelected]); // Get filtered Regions\n\n  var regionAdherents = adherentsToDisplay.filter(function (element) {\n    return adherentsToDisplayExpertise.includes(element);\n  });\n  var isWindowContext = true;\n\n  var _handleClick = function _handleClick(site) {\n    var url = site;\n    var prefixHttp = 'http://';\n    var prefixHttps = 'https://';\n\n    if (url.substr(0, prefixHttp.length) !== prefixHttp && url.substr(0, prefixHttps.length) !== prefixHttps) {\n      url = prefix + url;\n    }\n\n    if (isWindowContext) {\n      window.open(url, '_blank');\n    }\n  };\n\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(Box, {\n      mt: 7,\n      children: /*#__PURE__*/_jsxs(Container, {\n        maxWidth: \"lg\",\n        children: [/*#__PURE__*/_jsx(Grid, {\n          container: true,\n          children: /*#__PURE__*/_jsx(Grid, {\n            item: true,\n            xs: 12,\n            md: 12,\n            children: /*#__PURE__*/_jsx(Box, {\n              mb: 4,\n              children: /*#__PURE__*/_jsx(Title, {\n                color: \"#2699b0\",\n                content: \"Mob\\u2019In \".concat(region),\n                size: \"h4\",\n                bold: true,\n                letterspacing: \"2px\"\n              })\n            })\n          })\n        }), /*#__PURE__*/_jsxs(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsx(Grid, {\n            item: true,\n            xs: 12,\n            md: 8,\n            className: classes.item1,\n            children: /*#__PURE__*/_jsxs(Box, {\n              mb: 5,\n              pr: 7,\n              children: [/*#__PURE__*/_jsx(Title, {\n                color: \"black\",\n                content: \"Toutes les structures\",\n                size: \"h6\",\n                uppercase: true,\n                bold: true,\n                letterspacing: \"2px\"\n              }), /*#__PURE__*/_jsx(Title, {\n                color: \"black\",\n                content: \"Filtrer les r\\xE9sultats :\",\n                size: \"h6\",\n                uppercase: true,\n                italic: true,\n                bold: true,\n                letterspacing: \"2px\",\n                fontSize: \"12px\"\n              }), /*#__PURE__*/_jsxs(Grid, {\n                container: true,\n                children: [/*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 12,\n                  className: classes.grid,\n                  children: /*#__PURE__*/_jsxs(FormControl, {\n                    className: classes.formControl,\n                    children: [/*#__PURE__*/_jsx(InputLabel, {\n                      className: classes.inputLabel,\n                      children: \"D\\xE9partement\"\n                    }), /*#__PURE__*/_jsx(Select, {\n                      multiple: true,\n                      value: mainDepartementSelected // onChange={handleChangeDepartment}\n                      ,\n                      onChange: function onChange(event) {\n                        return setMainDepartmentSelected(event.target.value);\n                      },\n                      input: /*#__PURE__*/_jsx(Input, {}),\n                      MenuProps: MenuProps,\n                      children: regionDepartments.map(function (dep, index) {\n                        return /*#__PURE__*/_jsx(MenuItem, {\n                          value: dep.nom_departement,\n                          style: getStyles(dep.nom_departement, mainDepartementSelected),\n                          children: dep.nom_departement\n                        }, index);\n                      })\n                    })]\n                  })\n                }), /*#__PURE__*/_jsx(Grid, {\n                  item: true,\n                  xs: 12,\n                  children: /*#__PURE__*/_jsxs(FormControl, {\n                    className: classes.formControl,\n                    children: [/*#__PURE__*/_jsx(InputLabel, {\n                      className: classes.inputLabel,\n                      children: \"Expertise\"\n                    }), /*#__PURE__*/_jsx(Select, {\n                      multiple: true,\n                      value: mainExpertiseSelected // onChange={handleChangeDepartment}\n                      ,\n                      onChange: function onChange(event) {\n                        return setMainExpertiseSelected(event.target.value);\n                      },\n                      input: /*#__PURE__*/_jsx(Input, {}),\n                      MenuProps: MenuProps,\n                      children: expertises.map(function (exp, index) {\n                        return /*#__PURE__*/_jsx(MenuItem, {\n                          value: exp.type,\n                          style: getStylesExp(exp.type, mainExpertiseSelected),\n                          children: exp.type\n                        }, index);\n                      })\n                    })]\n                  })\n                })]\n              }), regionDepartments.map(function (dep, index) {\n                return /*#__PURE__*/_jsxs(Box, {\n                  mt: 3,\n                  children: [/*#__PURE__*/_jsx(Box, {\n                    children: /*#__PURE__*/_jsx(Title, {\n                      color: \"black\",\n                      content: dep.nom_departement || \"\",\n                      size: \"h6\",\n                      uppercase: true,\n                      bold: true,\n                      letterspacing: \"2px\",\n                      fontSize: \"12px\"\n                    })\n                  }), /*#__PURE__*/_jsx(Grid, {\n                    container: true,\n                    children: regionAdherents.filter(function (adh) {\n                      return adh.departement_siege.nom_departement === dep.nom_departement;\n                    }).map(function (d, i) {\n                      return /*#__PURE__*/_jsx(AdherentPreview, {\n                        adherent: d\n                      }, i);\n                    })\n                  })]\n                }, index);\n              })]\n            })\n          }), /*#__PURE__*/_jsx(Grid, {\n            item: true,\n            xs: 12,\n            md: 4,\n            className: classes.item2,\n            children: /*#__PURE__*/_jsxs(Grid, {\n              container: true,\n              spacing: 2,\n              className: classes.coordBox,\n              children: [/*#__PURE__*/_jsx(Grid, {\n                item: true,\n                xs: 3,\n                className: classes.box,\n                children: uniqueCoordinateur && uniqueCoordinateur.logo && /*#__PURE__*/_jsx(\"img\", {\n                  className: classes.mainImage,\n                  src: uniqueCoordinateur === null || uniqueCoordinateur === void 0 ? void 0 : (_uniqueCoordinateur$l = uniqueCoordinateur.logo) === null || _uniqueCoordinateur$l === void 0 ? void 0 : _uniqueCoordinateur$l.url,\n                  alt: \"mobilite\"\n                })\n              }), /*#__PURE__*/_jsx(Grid, {\n                item: true,\n                xs: 9,\n                className: classes.box,\n                children: uniqueCoordinateur && /*#__PURE__*/_jsx(Grid, {\n                  container: true,\n                  spacing: 3,\n                  children: /*#__PURE__*/_jsx(Grid, {\n                    item: true,\n                    className: classes.gridItem,\n                    xs: 12,\n                    sm: 12,\n                    md: 12,\n                    children: /*#__PURE__*/_jsxs(Box, {\n                      className: classes.banner,\n                      children: [/*#__PURE__*/_jsxs(Grid, {\n                        container: true,\n                        spacing: 2,\n                        children: [/*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 6,\n                          children: /*#__PURE__*/_jsx(Title, {\n                            fontSize: \"16px\",\n                            color: \"black\",\n                            bold: true,\n                            content: \"Pr\\xE9sident de r\\xE9gion\"\n                          })\n                        }), /*#__PURE__*/_jsxs(Grid, {\n                          item: true,\n                          xs: 6,\n                          children: [uniqueCoordinateur.nom_president && /*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"16px\",\n                              color: \"#2699b0\",\n                              bold: true,\n                              content: uniqueCoordinateur.nom_president || \"\"\n                            })\n                          }), /*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"13px\",\n                              color: \"black\",\n                              bold: true,\n                              content: uniqueCoordinateur.telephone_president || \"\"\n                            })\n                          }), /*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"13px\",\n                              color: \"black\",\n                              bold: true,\n                              content: /*#__PURE__*/_jsx(\"a\", {\n                                href: \"mailto:\".concat(uniqueCoordinateur.email_president),\n                                children: uniqueCoordinateur.email_president\n                              }) || \"\"\n                            })\n                          })]\n                        })]\n                      }), /*#__PURE__*/_jsxs(Grid, {\n                        container: true,\n                        spacing: 2,\n                        children: [/*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 6,\n                          children: uniqueCoordinateur.nom_co_president && /*#__PURE__*/_jsx(Title, {\n                            fontSize: \"16px\",\n                            color: \"black\",\n                            bold: true,\n                            content: \"Co-Pr\\xE9sident de r\\xE9gion\"\n                          })\n                        }), /*#__PURE__*/_jsxs(Grid, {\n                          item: true,\n                          xs: 6,\n                          children: [/*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"16px\",\n                              color: \"#2699b0\",\n                              bold: true,\n                              content: uniqueCoordinateur.nom_co_president || \"\"\n                            })\n                          }), /*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"13px\",\n                              color: \"black\",\n                              bold: true,\n                              content: uniqueCoordinateur.telephone_co_president || \"\"\n                            })\n                          }), /*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"13px\",\n                              color: \"black\",\n                              bold: true,\n                              content: /*#__PURE__*/_jsx(\"a\", {\n                                href: \"mailto:\".concat(uniqueCoordinateur.email_co_president),\n                                children: uniqueCoordinateur.email_co_president\n                              }) || \"\"\n                            })\n                          })]\n                        })]\n                      }), uniqueCoordinateur.nom_charge_developpement && /*#__PURE__*/_jsxs(Grid, {\n                        container: true,\n                        spacing: 2,\n                        children: [/*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 6,\n                          children: uniqueCoordinateur.nom_charge_developpement && /*#__PURE__*/_jsx(Title, {\n                            fontSize: \"16px\",\n                            color: \"black\",\n                            bold: true,\n                            content: \"Charg\\xE9.e de d\\xE9veloppement\"\n                          })\n                        }), /*#__PURE__*/_jsxs(Grid, {\n                          item: true,\n                          xs: 6,\n                          children: [/*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"16px\",\n                              color: \"#2699b0\",\n                              bold: true,\n                              content: uniqueCoordinateur.nom_charge_developpement || \"\"\n                            })\n                          }), /*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"13px\",\n                              color: \"black\",\n                              bold: true,\n                              content: uniqueCoordinateur.telephone_charge_developpement || \"\"\n                            })\n                          }), /*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Title, {\n                              fontSize: \"13px\",\n                              color: \"black\",\n                              bold: true,\n                              content: /*#__PURE__*/_jsx(\"a\", {\n                                href: \"mailto:\".concat(uniqueCoordinateur.email_charge_developpement),\n                                children: uniqueCoordinateur.email_charge_developpement\n                              }) || \"\"\n                            })\n                          })]\n                        })]\n                      }), uniqueCoordinateur.site_internet && /*#__PURE__*/_jsx(Grid, {\n                        container: true,\n                        children: /*#__PURE__*/_jsx(Grid, {\n                          item: true,\n                          xs: 12,\n                          children: /*#__PURE__*/_jsx(Box, {\n                            mb: 1,\n                            children: /*#__PURE__*/_jsx(Button, {\n                              className: classes.btn,\n                              onClick: function onClick() {\n                                return _handleClick(uniqueCoordinateur.site_internet);\n                              },\n                              children: uniqueCoordinateur.site_internet || \"\"\n                            })\n                          })\n                        })\n                      })]\n                    })\n                  })\n                })\n              })]\n            })\n          })]\n        })]\n      })\n    })\n  });\n};\n\nexport var __N_SSP = true;\nexport default Region;","map":null,"metadata":{},"sourceType":"module"}